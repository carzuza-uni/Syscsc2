<div class="row">
    <div class="col-md-12">
        <app-productor-detalle></app-productor-detalle>
    </div>
    <div class="col-md-12">
        <div class="card card-user">
            <div class="card-header">
                <h5 class="card-title">Informacion</h5>
            </div>
            <div class="card-body">
                <app-nav-menu-productor></app-nav-menu-productor>
                <div class="row">
                    <div class="col-md-12">
                        <form [formGroup]="formGroup">
                            <div class="row">
                                <legend class="col-md-12">Localización</legend>
                                <div class="form-group col-md-3">
                                    <label>Latitud</label>
                                    <input type="text" class="form-control" name="latitud" [(ngModel)]="agroclimatica.latitud" formControlName="latitud" class="form-control" [ngClass]="{ 'is-invalid':  control.latitud.errors  && control.latitud.touched}">
                                </div>
                                <div class="form-group col-md-3">
                                    <label>Norte Longitud:</label>
                                    <input type="text" class="form-control" name="norteLongitud" [(ngModel)]="agroclimatica.norteLongitud" formControlName="norteLongitud" class="form-control" [ngClass]="{ 'is-invalid':  control.norteLongitud.errors  && control.norteLongitud.touched}">
                                </div>
                                <div class="form-group col-md-3">
                                    <label>Este</label>
                                    <input type="text" class="form-control" name="este" [(ngModel)]="agroclimatica.este" formControlName="este" class="form-control" [ngClass]="{ 'is-invalid':  control.este.errors  && control.este.touched}">
                                </div>
                                <div class="form-group col-md-3">
                                    <label>M.S.N.M</label>
                                    <input type="text" class="form-control" name="msnm" [(ngModel)]="agroclimatica.msnm" formControlName="msnm" class="form-control" [ngClass]="{ 'is-invalid':  control.msnm.errors  && control.msnm.touched}">
                                </div>

                                <legend class="col-md-12">Suelo</legend>
                                <div class="form-group col-md-4">
                                    <label>Tiene Análisis de suelo</label>
                                    <select class="form-control" name="analisisSuelo" [(ngModel)]="agroclimatica.analisisSuelo" formControlName="analisisSuelo" class="form-control" [ngClass]="{ 'is-invalid':  control.analisisSuelo.errors  && control.analisisSuelo.touched}">
                                        <option value="" style="display: none;">Seleccione una opción...</option>
                                        <option value="SI">SI</option>
                                        <option value="NO">NO</option>
                                    </select>
                                </div>
                                <div class="form-group col-md-4">
                                    <label>Fecha de realización</label>
                                    <input type="date" class="form-control" name="fechaRealizacion" [(ngModel)]="agroclimatica.fechaRealizacion" formControlName="fechaRealizacion" class="form-control" [ngClass]="{ 'is-invalid':  control.fechaRealizacion.errors  && control.fechaRealizacion.touched}">
                                </div>
                                <div class="form-group col-md-4">
                                    <label>Es aplicado y considerado en plan de fertilización</label>
                                    <select class="form-control" name="planFertilizacion" [(ngModel)]="agroclimatica.planFertilizacion" formControlName="planFertilizacion" class="form-control" [ngClass]="{ 'is-invalid':  control.planFertilizacion.errors  && control.planFertilizacion.touched}">
                                        <option value="" style="display: none;">Seleccione una opción...</option>
                                        <option value="SI">SI</option>
                                        <option value="NO">NO</option>
                                    </select>
                                </div>

                                <legend class="col-md-12">Características físicas</legend>
                                <div class="form-group col-md-3">
                                    <label>Tipo de Textura</label>
                                    <select class="form-control" name="tipoTextura" [(ngModel)]="agroclimatica.tipoTextura" formControlName="tipoTextura" class="form-control" [ngClass]="{ 'is-invalid':  control.tipoTextura.errors  && control.tipoTextura.touched}">
                                        <option value="" style="display: none;">Seleccione una opción...</option>
                                        <option value="Arenosa (textura gruesa)">Arenosa (textura gruesa)</option>
                                        <option value="Franco (textura media)">Franco (textura media)</option>
                                        <option value="Arcillosos (textura fina)">Arcillosos (textura fina)</option>
                                    </select>
                                </div>
                                <div class="form-group col-md-3">
                                    <label>Presenta instalacion para preparacion de abonos</label>
                                    <select class="form-control" name="preparacionAbono" [(ngModel)]="agroclimatica.preparacionAbono" formControlName="preparacionAbono" class="form-control" [ngClass]="{ 'is-invalid':  control.preparacionAbono.errors  && control.preparacionAbono.touched}">
                                        <option value="" style="display: none;">Seleccione una opción...</option>
                                        <option value="SI">SI</option>
                                        <option value="NO">NO</option>
                                    </select>
                                </div>
                                <div class="form-group col-md-3">
                                    <label>Tipo</label>
                                    <select class="form-control" name="tipo" [(ngModel)]="agroclimatica.tipo" formControlName="tipo" class="form-control" [ngClass]="{ 'is-invalid':  control.tipo.errors  && control.tipo.touched}">
                                        <option value="" style="display: none;">Seleccione una opción...</option>
                                        <option value="Liquido">Liquido</option>
                                        <option value="Solido">Solido</option>
                                    </select>
                                </div>
                                <div class="form-group col-md-3">
                                    <label>Estado</label>
                                    <input type="text" class="form-control" name="estado" [(ngModel)]="agroclimatica.estado" formControlName="estado" class="form-control" [ngClass]="{ 'is-invalid':  control.estado.errors  && control.estado.touched}">
                                </div>
                                <div class="form-group col-md-12">
                                    <label>OBSERVACIONES</label>
                                    <textarea class="form-control" name="observaciones" [(ngModel)]="agroclimatica.observaciones" formControlName="observaciones" class="form-control" [ngClass]="{ 'is-invalid':  control.observaciones.errors  && control.observaciones.touched}" rows="3"></textarea>
                                </div>                                
                            </div>  
                            <div class="row">
                                <div class="update ml-auto mr-auto">
                                    <button class="btn btn-outline-success"  (click)="onSubmit()" [disabled]="formGroup.invalid">Guardar</button>
                                    <!--<button type="reset" class="btn btn-outline-secondary">Cancelar</button>-->
                                </div>
                            </div>
                        </form>
                    </div>                    
                </div>
                <div *ngIf="agroclimaticaId > 0">
                    <br><hr>
                    <div class="row">
                        <div class="col-md-12">
                            <h4 class="card-title">Uso del suelo</h4>
                            <form [formGroup]="formGroupUso">
                                <div class="row">
                                    <div class="form-group col-md-3">
                                        <label>Nº de lote o nombre</label>
                                        <input type="text" name="lote" [(ngModel)]="usoSuelo.lote" formControlName="lote" class="form-control" [ngClass]="{ 'is-invalid':  controlUso.lote.errors  && controlUso.lote.touched}">
                                    </div>
                                    <div class="form-group col-md-3">
                                        <label>Area (Has)</label>
                                        <input type="text" name="area" [(ngModel)]="usoSuelo.area" formControlName="area" class="form-control" [ngClass]="{ 'is-invalid':  controlUso.area.errors  && controlUso.area.touched}">
                                    </div>
                                    <div class="form-group col-md-3">
                                        <label>Cultivos o Usos</label>
                                        <input type="text" name="usos" [(ngModel)]="usoSuelo.usos" formControlName="usos" class="form-control" [ngClass]="{ 'is-invalid':  controlUso.usos.errors  && controlUso.usos.touched}">
                                    </div>
                                    <div class="form-group col-md-3">
                                        <label>Nombre del Sombrío</label>
                                        <input type="text" name="sombrio" [(ngModel)]="usoSuelo.sombrio" formControlName="sombrio" class="form-control" [ngClass]="{ 'is-invalid':  controlUso.sombrio.errors  && controlUso.sombrio.touched}">
                                    </div>
                                    <div class="form-group col-md-3">
                                        <label>Cultivo planteado próximo año</label>
                                        <input type="text" name="planteadoProximoAno" [(ngModel)]="usoSuelo.planteadoProximoAno" formControlName="planteadoProximoAno" class="form-control" [ngClass]="{ 'is-invalid':  controlUso.planteadoProximoAno.errors  && controlUso.planteadoProximoAno.touched}">
                                    </div>
                                    <div class="form-group col-md-3">
                                        <label>Pendiente</label>
                                        <select name="pendiente" [(ngModel)]="usoSuelo.pendiente" formControlName="pendiente" class="form-control" [ngClass]="{ 'is-invalid':  controlUso.pendiente.errors  && controlUso.pendiente.touched}">
                                            <option value="" style="display: none;">Seleccione una opción...</option>
                                            <option value="Pronunciada">Pronunciada</option>
                                            <option value="Moderada">Moderada</option>
                                            <option value="Leve">Leve</option>
                                        </select>
                                    </div>
                                    <div class="form-group col-md-3">
                                        <label>Presenta Erosión</label>
                                        <select name="presentaErosion" [(ngModel)]="usoSuelo.presentaErosion" formControlName="presentaErosion" class="form-control" [ngClass]="{ 'is-invalid':  controlUso.presentaErosion.errors  && controlUso.presentaErosion.touched}">
                                            <option value="" style="display: none;">Seleccione una opción...</option>
                                            <option value="SI">SI</option>
                                            <option value="NO">NO</option>
                                        </select>
                                    </div>
                                </div>  
                                <div class="row">
                                    <div class="update ml-auto mr-auto">
                                        <button class="btn btn-outline-success" (click)="onSubmitUso()" [disabled]="formGroupUso.invalid">Guardar</button>
                                        <button type="reset" class="btn btn-outline-secondary">Cancelar</button>                            
                                    </div>
                                </div>
                            </form>
                        </div>
                        <div class="col-md-12">
                            <h5 class="card-title">Listado de usos</h5>
                            <div class="table-responsive">
                                <table class="table">
                                <thead class=" text-primary">
                                    <th>Nº de lote o nombre</th>
                                    <th>Area (Has)</th>
                                    <th>Cultivos o Usos</th>
                                    <th>Nombre del Sombrío</th>
                                    <th>Acción</th>
                                </thead>
                                <tbody>
                                    <tr *ngFor="let u of usoSuelos; index as i ">
                                        <td>{{ u.lote }}</td>
                                        <th>{{ u.area }}</th>
                                        <td>{{ u.usos }}</td>
                                        <td>{{ u.sombrio }}</td>
                                        <td>
                                            <button class="btn btn-outline-info btn-sm" (click)="editarUso(i)">Editar</button>
                                        </td>
                                    </tr>
                                </tbody>                    
                                </table>
                            </div>
                        </div>
                    </div>
                    <br><hr>
                    <div class="row">
                        <div class="col-md-12">
                            <h4 class="card-title">Manejo cultivo de café, caña y Cacao</h4>
                            <form [formGroup]="formGroupManejo">
                                <div class="row">
                                    <div class="form-group col-md-3">
                                        <label>Nº  o nombre del lote</label>
                                        <input type="text" name="lote" [(ngModel)]="manejoCultivo.lote" formControlName="lote" class="form-control" [ngClass]="{ 'is-invalid':  controlManejo.lote.errors  && controlManejo.lote.touched}">
                                    </div>
                                    <div class="form-group col-md-3">
                                        <label>Variedad</label>
                                        <input type="text" name="variedad" [(ngModel)]="manejoCultivo.variedad" formControlName="variedad" class="form-control" [ngClass]="{ 'is-invalid':  controlManejo.variedad.errors  && controlManejo.variedad.touched}">
                                    </div>
                                    <div class="form-group col-md-3">
                                        <label>Nº arboles</label>
                                        <input type="number" name="numeroArboles" [(ngModel)]="manejoCultivo.numeroArboles" formControlName="numeroArboles" class="form-control" [ngClass]="{ 'is-invalid':  controlManejo.numeroArboles.errors  && controlManejo.numeroArboles.touched}">
                                    </div>
                                    <div class="form-group col-md-3">
                                        <label>Sistema de renovación</label>
                                        <select name="sistemaRenovacion" [(ngModel)]="manejoCultivo.sistemaRenovacion" formControlName="sistemaRenovacion" class="form-control" [ngClass]="{ 'is-invalid':  controlManejo.sistemaRenovacion.errors  && controlManejo.sistemaRenovacion.touched}">
                                            <option value="" style="display: none;">Seleccione una opción...</option>
                                            <option value="Siembra">Siembra</option>
                                            <option value="Poda">Poda</option>
                                        </select>
                                    </div>
                                    <div class="form-group col-md-3">
                                        <label>Fecha de siembra</label>
                                        <input type="date" name="fechaSiembra" [(ngModel)]="manejoCultivo.fechaSiembra" formControlName="fechaSiembra" class="form-control" [ngClass]="{ 'is-invalid':  controlManejo.fechaSiembra.errors  && controlManejo.fechaSiembra.touched}">
                                    </div>
                                    <div class="form-group col-md-3">
                                        <label>Distancia de siembra</label>
                                        <input type="text" name="distanciaSiembra" [(ngModel)]="manejoCultivo.distanciaSiembra" formControlName="distanciaSiembra" class="form-control" [ngClass]="{ 'is-invalid':  controlManejo.distanciaSiembra.errors  && controlManejo.distanciaSiembra.touched}">
                                    </div>
                                </div>  
                                <div class="row">
                                    <div class="update ml-auto mr-auto">
                                        <button class="btn btn-outline-success" (click)="onSubmitManejo()" [disabled]="formGroupManejo.invalid">Guardar</button>
                                        <button type="reset" class="btn btn-outline-secondary">Cancelar</button>                            
                                    </div>
                                </div>
                            </form>
                        </div>
                        <div class="col-md-12">
                            <h5 class="card-title">Listado de manejo de cultivo</h5>
                            <div class="table-responsive">
                                <table class="table">
                                    <thead class=" text-primary">
                                        <th>Nº o nombre del lote</th>
                                        <th>Variedad</th>
                                        <th>Nº arboles</th>
                                        <th>Fecha de siembra</th>
                                        <th>Acción</th>
                                    </thead>
                                    <tbody>
                                        <tr *ngFor="let m of manejoCultivos; index as i ">
                                            <td>{{ m.lote }}</td>
                                            <th>{{ m.variedad }}</th>
                                            <td>{{ m.numeroArboles }}</td>
                                            <td>{{ m.fechaSiembra }}</td>
                                            <td>
                                                <button class="btn btn-outline-info btn-sm" (click)="editarManejo(i)">Editar</button>
                                            </td>
                                        </tr>
                                    </tbody>                    
                                </table>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>